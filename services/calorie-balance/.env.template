# ===============================================
# Calorie Balance Service - Development Environment  
# ===============================================
# Copy this file to .env and configure for your environment

# ====================================
# Application Configuration
# ====================================
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG
PORT=8001
DATABASE_SCHEMA=calorie_balance

# ====================================
# Supabase Configuration
# ====================================
# Get these from your Supabase project dashboard
# URL format: https://xxxxxxxxxxxxx.supabase.co
SUPABASE_URL=your_supabase_project_url
SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_KEY=your_supabase_service_key

# ====================================
# Security Configuration
# ====================================
# Generate secure keys for production:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev-secret-key-change-in-production
JWT_SECRET_KEY=dev-jwt-secret-change-in-production
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# ====================================
# CORS Configuration
# ====================================
# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:3000,capacitor://localhost,https://localhost,http://localhost:8080

# ====================================
# Feature Flags
# ====================================
ENABLE_REAL_TIME=true
ENABLE_EVENT_PROCESSING=true
ENABLE_TEMPORAL_ANALYTICS=true
ENABLE_AI_OPTIMIZATION=false

# ====================================
# Performance Configuration  
# ====================================
# Database connection pool
DB_POOL_SIZE=10
DB_MAX_CONNECTIONS=20
DB_POOL_TIMEOUT=30

# Event processing
MAX_EVENTS_PER_BATCH=1000
EVENT_PROCESSING_INTERVAL=60
HIGH_FREQUENCY_SAMPLING_SECONDS=120

# API rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20

# ====================================
# Cache Configuration
# ====================================
CACHE_TTL_SECONDS=300
CACHE_MAX_SIZE=1000

# ====================================
# Analytics Configuration
# ====================================  
# Temporal view refresh intervals (seconds)
HOURLY_VIEW_REFRESH=300    # 5 minutes
DAILY_VIEW_REFRESH=3600    # 1 hour  
WEEKLY_VIEW_REFRESH=7200   # 2 hours
MONTHLY_VIEW_REFRESH=21600 # 6 hours

# Data quality thresholds
MIN_CONFIDENCE_SCORE=0.7
MAX_EVENT_AGE_DAYS=90
OUTLIER_DETECTION_THRESHOLD=3.0

# ====================================
# Business Logic Configuration
# ====================================
# BMR calculation settings
DEFAULT_ACTIVITY_LEVEL=moderate
BMR_FORMULA=mifflin_st_jeor  # options: mifflin_st_jeor, harris_benedict

# Goal management
DEFAULT_WEEKLY_WEIGHT_CHANGE_KG=0.5
MAX_DAILY_CALORIE_DEFICIT=1000
MIN_DAILY_CALORIES=1200

# Event validation
MAX_SINGLE_MEAL_CALORIES=3000
MAX_DAILY_CALORIES=6000
MAX_EXERCISE_CALORIES_PER_HOUR=1000

# ====================================
# Monitoring & Logging
# ====================================
# Logging configuration
LOG_FORMAT=structured  # options: structured, simple
LOG_FILE_PATH=/tmp/calorie-balance.log
LOG_ROTATION_SIZE=10MB
LOG_RETENTION_DAYS=7

# Health check configuration
HEALTH_CHECK_TIMEOUT=5
DB_HEALTH_CHECK_QUERY_TIMEOUT=3

# Metrics collection
ENABLE_METRICS=true
METRICS_PORT=8002
METRICS_PATH=/metrics

# ====================================
# Development Tools
# ====================================
# Testing
TEST_DATABASE_URL=postgresql://postgres:password@localhost:5432/test_calorie_balance
ENABLE_TEST_DATA_GENERATION=true

# Debugging
ENABLE_SQL_LOGGING=false
ENABLE_REQUEST_LOGGING=true
ENABLE_RESPONSE_LOGGING=false

# Development server
DEV_RELOAD=true
DEV_RELOAD_DIRS=app,tests
DEV_RELOAD_INCLUDES=*.py,*.yaml,*.json

# ====================================
# Integration Configuration
# ====================================
# User Management Service
USER_MANAGEMENT_SERVICE_URL=http://localhost:8000
USER_MANAGEMENT_API_KEY=dev-api-key

# AI Coaching Service (when available)
AI_COACHING_SERVICE_URL=http://localhost:8003
AI_COACHING_API_KEY=dev-ai-api-key

# External APIs
NUTRITION_API_URL=https://api.nutrition.service
NUTRITION_API_KEY=your-nutrition-api-key

# Webhook endpoints
WEBHOOK_SECRET=dev-webhook-secret
WEBHOOK_TIMEOUT=10

# ====================================
# Production Overrides
# ====================================
# These will be overridden in production environment
PRODUCTION_SECRET_KEY=change-me-in-production
PRODUCTION_JWT_SECRET=change-me-in-production
PRODUCTION_ALLOWED_ORIGINS=https://your-frontend-domain.com
PRODUCTION_DB_POOL_SIZE=20
PRODUCTION_LOG_LEVEL=INFO